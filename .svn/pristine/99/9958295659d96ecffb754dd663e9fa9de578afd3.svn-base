webpackJsonp([39],{"6A3Z":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("KrBq"),n=s("P2Uu"),a={data:function(){return{input:{userName:"",password:"",vCode:""},output:{portrait:"",userName:"",phone:"",nickName:""},isLogin:!1,errMsg:"",baseUrl:i.a+"szipee/user!VerifyCode.action",imgUrl:i.a+"szipee/user!VerifyCode.action"}},created:function(){this.getUserInfo()},methods:{login:function(){var t=this,e={loginName:this.input.userName,password:this.input.password,verifyCode:this.input.vCode};""==e.loginName||""==e.password?this.errMsg="用户名或密码不能为空!":""==e.verifyCode?this.errMsg="请输入验证码!":n.a.Request("szipee/user!login.action","POST",null,e).then(function(e){"success"==e.state?(t.isLogin=!0,sessionStorage.userInfo=JSON.stringify(e),t.output.portrait=e.urls,t.output.userName=e.loginName,t.output.phone=e.phone,t.output.nickName=e.nickName,t.$notify({title:"提示",message:e.info,type:"success"}),"/"!=t.$route.path&&t.$router.push({path:"/"})):t.errMsg=e.info})},getUserInfo:function(){var t=this,e=JSON.parse(sessionStorage.getItem("userInfo"));e&&(this.isLogin=!0,this.output.userName=e.loginName,n.a.Request("szipee/user!queryCust.action","post",null,{loginName:e.loginName}).then(function(e){t.output.nickName=e.nickName,t.output.phone=e.phone,t.output.portrait=e.urls}))},updateVcode:function(){this.imgUrl=this.baseUrl+"?num="+Math.floor(100*Math.random()+1)+"1&loginName="+this.input.userName}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[t.isLogin?s("router-link",{staticClass:"already_login",attrs:{to:"/userCenter"}},[s("div",{staticClass:"portrait"},[s("img",{attrs:{alt:"",src:t._f("imgUrlFilter")(t.output.portrait)}})]),t._v(" "),s("span",{staticClass:"userName"},[t._v(t._s(t.output.nickName))]),t._v(" "),s("span",{staticClass:"userPhone"},[t._v(t._s(t.output.phone))])]):s("div",{staticClass:"not_login"},[s("h2",[t._v("登录")]),t._v(" "),s("ul",{staticClass:"form"},[s("li",[s("el-input",{attrs:{placeholder:"请输入手机号码",clearable:""},on:{blur:t.updateVcode},model:{value:t.input.userName,callback:function(e){t.$set(t.input,"userName",e)},expression:"input.userName"}})],1),t._v(" "),s("li",[s("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)}},model:{value:t.input.password,callback:function(e){t.$set(t.input,"password",e)},expression:"input.password"}})],1),t._v(" "),s("li",{staticClass:"vCode_wrap"},[s("div",{staticClass:"vCode_input"},[s("el-input",{attrs:{placeholder:"请输入验证码",clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)}},model:{value:t.input.vCode,callback:function(e){t.$set(t.input,"vCode",e)},expression:"input.vCode"}})],1),t._v(" "),s("div",{staticClass:"vCode_img"},[s("img",{attrs:{src:t.imgUrl,alt:""},on:{click:t.updateVcode}})])]),t._v(" "),s("li",{staticClass:"loginBnt"},[s("span",{staticClass:"error_Message"},[t._v(t._s(t.errMsg))]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)]),t._v(" "),s("div",{staticClass:"textBtn"},[s("router-link",{attrs:{to:"/selectRegister"}},[s("el-button",{attrs:{type:"text"}},[t._v("免费注册")])],1),t._v(" "),s("router-link",{attrs:{to:"/resetPassword"}},[s("el-button",{attrs:{type:"text"}},[t._v("找回密码")])],1)],1)])],1)},staticRenderFns:[]},r=s("VU/8")(a,o,!1,function(t){s("pFeF")},null,null);e.default=r.exports},pFeF:function(t,e){}});